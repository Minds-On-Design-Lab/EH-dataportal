{{- define "main" -}}

<link rel="stylesheet" href="/css/accessible-autocomplete.min.css">

<article class="container-fluid" id="skip-header-target">

    <div class="row">
        <div class="col-md-11 mx-auto mt-4 pl-0">
            <nav aria-label="breadcrumb" class="mb-4">
                <ul class="breadcrumb">
                    <li class="breadcrumb-item"><a href="#">Home</a></li>
                    <li class="breadcrumb-item"><a href="{{ .Site.BaseURL }}key-topics/">Key Topics</a></li>
                    <li class="breadcrumb-item"><a href="{{ .Site.BaseURL }}key-topics/airquality/">Air Quality</a></li>
                    <li class="breadcrumb-item active" aria-current="page">{{ .Title }}</li>
                </ul>
            </nav>
        </div>
        <div class="col-md-2 mr-auto"></div>
    </div>

    <div class="row">
        <div class="col-11 mx-auto pl-0 mb-2">
            <h2><i class="fas fa-star" aria-hidden="true" style="margin-right: 10px"></i>
                Your Neighborhood's Air Quality</h2>

            <div class="row">
                <div class="col-md-6">
                    <p>We combine data from our air quality monitoring network, NYCCAS, with other data to understand what
                        makes one neighborhood's air quality different from another's. We found that building emissions,
                        building density, industrial areas, and traffic density are associated with differences in air
                        quality.</p>
                </div>
                <div class="col-md-6">
                    <p>If we don't have an air quality monitor in one neighborhood, but we know its building density, its
                        industrial area, and its traffic, then we can model (estimate or predict) its air quality - based on
                        monitored air quality in similar neighborhoods.</p>
                </div>
            </div>

            <hr class="my-2">

            <!-- new neighborhood selector with flexdatalist -->
            <div class="row">
                <div class="col-md-6 mx-auto">
                    <div class="fs-sm pb-1">Enter a neighborhood to get data:</div>

                    <div class="btn-group" role="group" style="width:100%;">
    
                        <input 
                            id="flex_search"
                            type='search'
                            class='flexdatalist form-control'
                            name='indicator_name_suggestion'
                        />
    
                        <button id="clear" class="btn btn-md btn-warning">Clear</button>
    
                    </div>

                    <div class="basic-callout p-2 my-2">
                        <p class="h3" style="font-weight:normal!important;">Your neighborhood: <span class="h3" style="font-weight:bold;color:#15607a;" id="NTA2"></span></p>
                        <p><em class="fs-sm"><a
                            href="/data-stories/geographies">Read about Neighborhood Tabulation Areas.</a></em> </p>

                     </div>



                </div>
            </div>

        </div>
    </div>

    <!-- new Layout -->
    <div class="row my-4">
        <div class="col-md-10 mx-auto">
            <h3><i class="fas fa-smog mr-1"></i>Air quality in your neighborhood </h3>
            <div class="row mt-2">
                <div class="col-12 my-2">
                    <h4>PM2.5 (fine particles)</h4>
                    <p class="fs-sm"><b>PM2.5</b> worsens lung and heart diseases and are linked to cancer and
                        premature death. NYC meets the EPA's annual average standard (measured in micrograms per cubic
                        meter, or μg/m<sup>3</sup>), but short-term concentrations sometimes exceed this threshold.</p>

                </div>
                <div class="col-sm-7 col-xs-12">
                    <div class="" style="width:100%;height:150px;" id="PMDestination">Chart</div>
                </div>
                <div class="col-2 ml-auto">
                    <p class="mt-2"><span class="home-label">Your neighborhood:</span></p>
                    <p><span class="home-label">NYC average:</span></p>
                    <p><span class="home-label">EPA standard:</span></p>
                </div>
                <div class="col-2 mr-auto">
                    <p class="mt-2"><span class="h5"><span id="thisPM">XXX</span>  μg/m<sup>3</sup></span></p>
                    <p><span class="h5">7.0 μg/m<sup>3</sup></span></p>
                    <p><span class="h5">12 μg/m<sup>3</sup></span></p>
                </div>
            </div>

            <div class="row mt-4">
                <div class="col-12 my-2">
                    <h4>Nitrogen dioxide</h4>
                    <p class="fs-sm"><b>Nitrogen dioxide</b> is linked to asthma hospitalizations and other respiratory conditions.
                        NYC meets the EPA's annual standard (measured in parts per billion, or ppb), but short-term
                        concentrations sometimes exceed this threshold.</p>
                </div>

                <div class="col-sm-7 col-xs-12">
                    <div class="" style="width:100%;height:150px;" id="NODestination">Chart</div>
                </div>
                <div class="col-2 ml-auto">
                    <p class="mt-2"><span class="home-label">Your neighborhood:</span></p>
                    <p><span class="home-label">NYC average:</span></p>
                    <p><span class="home-label">EPA standard:</span></p>
                </div>
                <div class="col-2 mr-auto">
                    <p class="mt-2"><span class="h5"><span id="thisNOx">XXX</span> ppb</span></p>
                    <p><span class="h5">17 ppb</span></p>
                    <p><span class="h5">53 ppb</span></p>
                </div>
            </div>

            <hr class="mt-4 mb-2">
            <h3><i class="fa fa-question-circle mr-1"></i>What affects air quality in your neighborhood?</h3>

            <div class="row">
                <div class="col-sm-7 col-xs-12" style="border: 1px solid green; height: 450px">
                    
                    <span id="mapTitle">Building emissions</span><br>
                    <div class="fs-sm mt-1">
                        <span class="badge badge-better">1 (Low)</span>
                        <span class="badge badge-medium">2 (Medium)</span>
                        <span class="badge badge-worse">3 (High)</span>
                    </div>
                </div>

                <div class="col-sm-5 col-xs-12">
                    <div class="sourceBox sourceBox-active" id="sourceBox1" onclick="changeSource(1)">
                        <h3 class="fs-md">Buliding emissions: <span class="badge" id="BE">XXX</span></h3>
                        <p class="fs-sm">Like vehicles, buildings burn fuel: their boilers run on oil or gas to produce heat and hot water. These boilers emit pollutants that affect your neighborhood's air quality.
                        </p>
                    </div>

                    <div class="sourceBox" id="sourceBox2" onclick="changeSource(2)">
                        <h3 class="fs-md">Commercial cooking: <span class="badge" id="CC">XXX</span></h3>
                        <p class="fs-sm">Commercial cooking density - specifically, the density of restaurant permits to use charbroilers - leads to more emissions.
                        </p>
                    </div>

                    <div class="sourceBox" id="sourceBox3" onclick="changeSource(3)">
                        <h3 class="fs-md">Industrial area: <span class="badge" id="IA">XXX</span></h3>
                        <p class="fs-sm">Manufacturing can emit pollutants, construction can kick up particulate matter, and increased truck traffic can produce more emissions.
                        </p>
                    </div>

                    <div class="sourceBox" id="sourceBox4" onclick="changeSource(4)">
                        <h3 class="fs-md">Traffic density: <span class="badge" id="TD">XXX</span></h3>
                        <p class="fs-sm">Traffic produces "tailpipe emissions" like PM2.5, NOx and carbon monoxide (CO), and tire wear and braking release additional particulate matter into the air.
                        </p>
    
                    </div>

                </div>
            </div>

        </div>

    </div>

    <hr class="my-4">

    <div class="row mb-2">
        <div class="col-md-8 mx-auto">
            <h4>More resources</h4>
        </div>
    </div>

    <div class="row mb-4">
        <div class="col-md-4 ml-auto">
            <div class="card content-card">
                <div class="card-content px-1 py-1">
                    <h5>NYCCAS Annual Report</h5>
                    <p class="fs-md">Key findings from NYC's comprehensive air quality monitoring program, including pollutant trends and local sources.</p>

                    <p class="fs-md"><a href="/key-topics/airquality/nyccas/">Read more ></a> </p>
                </div>

            </div>


        </div>

        <div class="col-md-4 mr-auto">
            <div class="card content-card">
                <div class="card-content px-1 py-1">
                    <h5>Real-Time Air Quality</h5>
                    <p class="fs-md">Get hourly PM2.5 readings from real-time air quality monitors in strategic spots around the city.</p>
                    <p class="fs-md"><a href="../realtime">Get the data ></a></p>
                </div>
            </div>
        </div>
    </div>

    <script>
        function changeSource(x) {
            console.log(x)

            // get all class sourceBox and remove active
            var sourceBoxes = document.querySelectorAll(".sourceBox")
            for (let i = 0; i < sourceBoxes.length; i++) {
                sourceBoxes[i].classList.remove('sourceBox-active')
            }

            // highlight what you clicked on
            var thisBox = 'sourceBox' + x
            document.getElementById(thisBox).classList.add('sourceBox-active')

            // change map
            var title;

            if (x==1) {
                title = 'Building emissions'
            } else if (x==2) {
                title = "Building density"
            } else if (x==3) {
                title = "Industrial area"
            } else if (x==4) {
                title = "Traffic density"
            }

            document.getElementById('mapTitle').innerHTML = title
        }
    </script>

    <style>
        .sourceBox {
            padding: 10px;
        }

        .sourceBox:hover {
            background-color: #f1f1f1;
            cursor: pointer
        }

        .sourceBox-active {
            background-color: #f1f1f1;
        }
    </style>

    <!-- old functionality -->



    <div id="outputContent" style="display:none"> <!--change to none-->

        <hr class="my-2">

        <div class="row my-4">

            <div class="col-md-6 col-sm-12 ml-auto pl-0">
                <h5><i class="fa fa-question-circle"></i>&nbsp;What affects the air in your neighborhood</h5>

                <div class="row no-gutters">
                    <div class="col-6">
                        <button type="button" id="btn1" class="mapbtns btn btn-sm btn-block btn-outline-light text-black active" onclick="changeFactor(1,code)"><i class="h5 fas fa-smog mr-1" aria-hidden="true"></i>Building emissions <span id="buildingEmissions"></span></button>
                        <button type="button" id="btn2" class="mapbtns btn btn-sm btn-block btn-outline-light text-black" onclick="changeFactor(2,code)"><i class="h5 fas fa-city mr-1" aria-hidden="true"></i>Building density<span id="buildingDensity"></span></button>
                    </div>

                    <div class="col-6">
                        <button type="button" id="btn3" class="mapbtns btn btn-sm btn-block btn-outline-light text-black" onclick="changeFactor(3,code)"><i class="h5 fas fa-industry mr-1" aria-hdden="true"></i>Industrial area<span id="industrial"></span></button>
                        <button type="button" id="btn4" class="mapbtns btn btn-sm btn-block btn-outline-light text-black" onclick="changeFactor(4,code)"><i class="h5 fas fa-car mr-1" aria-hidden="true"></i>Traffic density<span id="trafficDensity"></span></button>
                    </div>
                </div>
                <div class="card content-card mb-4">
                    <div class="card-content px-1 py-1">

                        <!-- Map -->
                        <div id="mapHolder" style="width:100%; height: 500px;">

                        </div>

                        <!-- Legend -->
                        <div class="fs-sm float-right mb-1">
                            <span style="background-color:#f5f1f8; padding: 5px; font-weight:bold;">1 (Low)</span>
                            <span style="background-color:#bcbcdc; padding: 5px; font-weight:bold;">2 (Medium)</span>
                            <span style="background-color:#8077b6; padding: 5px; font-weight:bold;">3 (High)</span>
                        </div>

                        <!-- Explanation -->
                        <div style="clear:both" class="fs-sm">
                            <div id="text1" class="descriptionText">
                                <p>Building emissions affect your neighborhood's air quality. Like vehicles, buildings
                                    burn fuel: their boilers run on oil or gas to produce heat and hot water. These
                                    boilers emit pollutants that affect your neighborhood's air quality.</p>
                            </div>
                            <div id="text2" class="descriptionText">
                                <p>Building density is a key factor for air quality - since buildings emit pollutants, a
                                    neighborhood's building density can help predict its air quality. New York City's
                                    building density is a function of its population density - with over 26,000 people
                                    per square mile, it's is the densest American city.</p>
                            </div>
                            <div id="text3" class="descriptionText">
                                <p>The amount of industrial area in a neighborhood may affect its air quality in several
                                    ways. Manufacturing may emit pollutants, construction can kick up particulate
                                    matter, and increased truck traffic can lead to increased vehicular emissions. </p>
                            </div>
                            <div id="text4" class="descriptionText">
                                <p> Traffic density affects a neighborhood's air quality in a few ways. Combustion
                                    engines emit "tailpipe emissions" such as PM2.5, NOx and carbon monoxide (CO), while
                                    dust from wear to tires and from braking contribute additional particulate matter to
                                    the air.</p>
                            </div>
                        </div>
                    </div>

                </div>

            </div>

            <div class="col-md-5 mr-auto">
                <h5><i class="fas fa-smog"></i>&nbsp;Air quality in your neighborhood </h5>
                <div class="card content-card">
                    <div class="card-content px-1 py-1">
                        <p class="fs-sm"><b>PM2.5</b> (or fine particles) worsen lung and heart diseases and are linked to cancer and
                            premature death. NYC meets the EPA's annual average standard (measured in micrograms per cubic
                            meter, or μg/m<sup>3</sup>), but short-term concentrations sometimes exceed this threshold.</p>
                        <hr>
                        <div class="row mb-2">
                            <div class="col-4"><span class="home-label">EPA standard:</span>
                                <h4>12 μg/m<sup>3</sup></h4>
                            </div>
                            <div class="col-4"><span class="home-label">NYC average:</span>
                                <h4>7.0 μg/m<sup>3</sup></h4>
                            </div>
                            <div class="col-4"><span class="home-label">Your area:</span><h4 id="PM"></h4>
                            </div>
    
                        </div>
                        <div style="height: 150px;" id="PMbar"></div>
                    </div>
                </div>
    
                <br>
    
                <div class="card content-card">
                    <div class="card-content px-1 py-1">
                        <p class="fs-sm"><b>Nitrogen dioxide</b> is linked to asthma hospitalizations and other respiratory conditions.
                            NYC meets the EPA's annual standard (measured in parts per billion, or ppb), but short-term
                            concentrations sometimes exceed this threshold.</p>
                        <hr>
                        <div class="row mb-2">
                            <div class="col-4"><span class="home-label">EPA standard:</span>
                                <h4>53 ppb</h4>
                            </div>
                            <div class="col-4"><span class="home-label">NYC average:</span>
                                <h4>17 ppb</h4>
                            </div>
                            <div class="col-4"><span class="home-label">Your area:</span>
                                <h4 id="NO2"></h4>
                            </div>
                        </div>
                        <div style="height: 150px;" id="NO2bar">chart placeholder</div>
                    </div>
                </div>
                <br>
                <p>For more air quality data, see <a href="/key-topics/airquality/nyccas/">The NYCCAS Annual Report</a>. </p>
            </div>
        </div>
    </div>


</article>

<!--This code uses the JS file specified in the page's frontmatter-->

<script type="text/javascript" src="{{ .Params.customJS }}"></script>

<!-- flexdatalist -->

{{- $flexdatalist_css := resources.Get "node_modules/jquery-flexdatalist/jquery.flexdatalist.min.css" -}}
<link rel="stylesheet" href="{{ $flexdatalist_css.RelPermalink }}"/>

{{- $flexdatalist_js := resources.Get "node_modules/jquery-flexdatalist/jquery.flexdatalist.min.js" -}}
<script type="text/javascript" src="{{ $flexdatalist_js.RelPermalink }}"></script>

{{- end -}}